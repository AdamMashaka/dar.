# Policy Question Answering System

A web application that takes a user's question, surveys open access research articles about a given policy, and returns an answer to the user.

# Project Overview

Every year, millions of research articles on different policies and their consequences are published. Each of these is a rich source of information that can help policy advisors in determining the appropriate policies to implement. This application carries out a number of functions.

1. Provide a chatbot that the user interacts with.
2. Based on the user's answers, generate a question about a given policy consequence.
3. Process the question to obtain keywords and then use these keywords to fetch open access research articles about the policy.
4. Perform claim detection on the abstract of each article to determine whether the article found evidence for or against a given policy consequence.
5. Count the total number of articles that are for or against a given policy consequence.
6. Display this data in a visualization and also provide short summaries of the policy and its consequence.

# Running locally

Make sure that you have Redis, Python 3.6+, pip, and virtualenv installed on your computer.

Clone the git repository and change into the top directory.

```
git clone https://github.com/Prosper21/Policy-Question-Answering-System
cd Policy-Question-Answering-System
```

Create a virtual environment and activate it.

```
virtualenv venv
. venv/bin/activate
```

Install all the required packages by running the command:

```
pip install -r requirements.txt.
```

Create a .env file to store your environment variables. In our case, this would have the following values.

```
SECRET_KEY = 'xxx' # Use your own secret key here
REDIS_URL = 'redis://localhost:6379'
```

We now have all the files and packages that we need to run the application on our local host.
In one terminal, start the redis server by running:

```
redis-server
```

In a second terminal, change into the Policy-Question-Answering-System directory, activate the virtual environemnt, and start the celery workers by running:

```
celery worker -A answer_policy_question.celery -O fair
```

In a third terminal, change into the Policy-Question-Answering-System directory, activate the virtual environemnt, and start your application by running:

```
python app.py.
```

You should see the application running and you can access it on localhost:5000.

# Deploying on Heroku

Open an account on Heroku at <https://signup.heroku.com/>.

Install the Heroku CLI on your computer and carry out any other required configurations. The details can be found here <https://devcenter.heroku.com/articles/heroku-cli>.

Clone the git repository and change into the top directory.

```
git clone https://github.com/Prosper21/Policy-Question-Answering-System
cd Policy-Question-Answering-System
```

Create an app on Heroku, which prepares Heroku to receive your source code.

```
heroku create
```

In this case, heroku generates a random name for your app. You can also provide your own name by running:

```
heroku create <app-name>
```

Because this application uses Heroku addons, we need to create those first. In our case, we need the redis addon. We do this by running:

```
heroku addons:create heroku-redis:hobby-dev
```
This will automatically set the REDIS_URL configuration variable for our application but we also need to set up our SECRET_KEY configuration variable. We do this by running:

```
heroku config:set SECRET_KEY = 'xxx' # Use your own secret key here
```

We can now deploy to Heroku by running:

```
git push heroku master
```
Go to the Heroku dashboard and makes sure that your app's web and worker dynos are both switched on.

You can now visit the app at the url generated by its name i.e. herokuapp.app-name.com or simply open the app by running:
  
```
heroku open
```
  
# Sills Needed

* Python 3.6+
* JavaScript/HTML/CSS
* Heroku

# Notes

If you make any changes for example by installing new packages and running 
```
pip freeze > requirements.txt
```
then you will have to add 
```
https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-2.1.0/en_core_web_sm- 2.1.0.tar.gz#egg=en_core_web_sm
```
to your requirements.txt. This ensures that the required spaCy model is loaded.

# TODO
